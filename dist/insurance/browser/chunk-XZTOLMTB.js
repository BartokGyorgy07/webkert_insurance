import{a as Y,b as Z}from"./chunk-SNUHXQUX.js";import{b as j,c as B,d as z,f as H,g as J,h as K,i as Q}from"./chunk-XOVWS2D2.js";import{b as T,d as s,f as G,g as A,h as C,j as _,k as O,m as R,n as V,o as D,r as q}from"./chunk-U5MZNTUN.js";import{q as I}from"./chunk-YNJY2X3T.js";import{o as L,p as k}from"./chunk-RF2VUACT.js";import{a as W,b as X}from"./chunk-IO52UDSH.js";import{$ as w,$a as U,Ca as E,Ha as u,La as x,Qa as p,Sb as P,Ta as t,Ua as e,Va as g,Xb as y,Yb as N,Za as F,aa as S,ab as h,kb as i,mb as b,ta as m,tb as M,xa as v}from"./chunk-7RETW5W6.js";var ee=()=>["/login"];function te(n,a){n&1&&(t(0,"div",1)(1,"h2"),i(2,"Registration in progress"),e(),g(3,"mat-spinner",3),t(4,"p"),i(5,"Please wait..."),e()())}function ie(n,a){n&1&&(t(0,"mat-error"),i(1,"Please enter a valid email address"),e())}function ne(n,a){n&1&&(t(0,"mat-error"),i(1,"First name must be at least 2 characters long"),e())}function oe(n,a){n&1&&(t(0,"mat-error"),i(1,"Last name must be at least 2 characters long"),e())}function re(n,a){n&1&&(t(0,"mat-error"),i(1,"Password must be at least 6 characters long"),e())}function ae(n,a){n&1&&(t(0,"mat-error"),i(1,"Passwords does not match"),e())}function me(n,a){if(n&1&&(t(0,"div",13),i(1),e()),n&2){let o=h(2);m(),b(" ",o.signUpError," ")}}function le(n,a){if(n&1){let o=F();t(0,"form",4),U("ngSubmit",function(){w(o);let d=h();return S(d.signup())}),t(1,"mat-form-field",5)(2,"mat-label"),i(3,"Email"),e(),g(4,"input",6),t(5,"mat-icon",7),i(6,"email"),e(),u(7,ie,2,0,"mat-error"),e(),t(8,"div",8)(9,"mat-form-field",5)(10,"mat-label"),i(11,"First Name"),e(),g(12,"input",9),t(13,"mat-icon",7),i(14,"person"),e(),u(15,ne,2,0,"mat-error"),e(),t(16,"mat-form-field",5)(17,"mat-label"),i(18,"Last Name"),e(),g(19,"input",10),t(20,"mat-icon",7),i(21,"person"),e(),u(22,oe,2,0,"mat-error"),e()(),t(23,"mat-form-field",5)(24,"mat-label"),i(25,"Password"),e(),g(26,"input",11),t(27,"mat-icon",7),i(28,"lock"),e(),u(29,re,2,0,"mat-error"),e(),t(30,"mat-form-field",5)(31,"mat-label"),i(32,"Confirm Password"),e(),g(33,"input",12),t(34,"mat-icon",7),i(35,"lock"),e(),u(36,ae,2,0,"mat-error"),e(),u(37,me,2,1,"div",13),t(38,"div",14)(39,"button",15),i(40,"Register"),e(),t(41,"button",16),i(42,"Already have an account?"),e()()()}if(n&2){let o,l,d,f,c,r=h();x("formGroup",r.signUpForm),m(7),p((o=r.signUpForm.get("email"))!=null&&o.invalid&&((o=r.signUpForm.get("email"))!=null&&o.touched)?7:-1),m(8),p((l=r.signUpForm.get("name.firstname"))!=null&&l.invalid&&((l=r.signUpForm.get("name.firstname"))!=null&&l.touched)?15:-1),m(7),p((d=r.signUpForm.get("name.lastname"))!=null&&d.invalid&&((d=r.signUpForm.get("name.lastname"))!=null&&d.touched)?22:-1),m(7),p((f=r.signUpForm.get("password"))!=null&&f.invalid&&((f=r.signUpForm.get("password"))!=null&&f.touched)?29:-1),m(7),p(((c=r.signUpForm.get("rePassword"))==null?null:c.value)!==((c=r.signUpForm.get("rePassword"))==null?null:c.value)?36:-1),m(),p(r.signUpError?37:-1),m(2),x("disabled",r.signUpForm.invalid),m(2),x("routerLink",M(9,ee))}}var $=class n{constructor(a,o){this.router=a;this.authService=o}signUpForm=new C({email:new _("",[s.required,s.email]),password:new _("",[s.required,s.minLength(6)]),rePassword:new _("",[s.required]),name:new C({firstname:new _("",[s.required,s.minLength(2)]),lastname:new _("",[s.required,s.minLength(2)])})});isLoading=!1;showForm=!0;signUpError="";signup(){if(this.signUpForm.invalid){this.signUpError="Please correct the form errors before submitting.";return}let a=this.signUpForm.get("password"),o=this.signUpForm.get("rePassword");if(a?.value!==o?.value){this.signUpError="Passwords do not match.";return}this.isLoading=!0,this.showForm=!1;let l={name:{firstname:this.signUpForm.value.name?.firstname||"",lastname:this.signUpForm.value.name?.lastname||""},email:this.signUpForm.value.email||"",insurances:[],expired_insurances:[]},d=this.signUpForm.value.email||"",f=this.signUpForm.value.password||"";this.authService.signUp(d,f,l).then(c=>{this.authService.updateLoginStatus(!0),this.router.navigateByUrl("/home")}).catch(c=>{switch(this.isLoading=!1,this.showForm=!0,c.code){case"auth/email-already-in-use":this.signUpError="Email already in use. Please use a different email.";break;case"auth/invalid-email":this.signUpError="Invalid email address.";break;case"auth/weak-password":this.signUpError="Password is too weak. Use at least 6 characters.";break;default:this.signUpError="An error occurred during signup. Please try again."}})}static \u0275fac=function(o){return new(o||n)(v(y),v(I))};static \u0275cmp=E({type:n,selectors:[["app-signup"]],decls:5,vars:2,consts:[[1,"signup-container"],[1,"loading-container"],[1,"signup-form",3,"formGroup"],["diameter","50"],[1,"signup-form",3,"ngSubmit","formGroup"],["appearance","outline"],["matInput","","type","email","formControlName","email"],["matSuffix",""],["formGroupName","name",1,"name-row"],["matInput","","formControlName","firstname"],["matInput","","formControlName","lastname"],["matInput","","type","password","formControlName","password"],["matInput","","type","password","formControlName","rePassword"],[1,"error-message"],[1,"buttons-row"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["mat-flat-button","",3,"routerLink"]],template:function(o,l){o&1&&(t(0,"div",0)(1,"h1"),i(2,"Create Account"),e(),u(3,te,6,0,"div",1)(4,le,43,10,"form",2),e()),o&2&&(m(3),p(l.isLoading?3:-1),m(),p(l.showForm?4:-1))},dependencies:[P,q,O,T,G,A,R,D,V,J,H,j,B,z,Q,K,k,L,X,W,Z,Y,N],styles:[".signup-container[_ngcontent-%COMP%]{max-width:500px;margin:40px auto;padding:20px;border-radius:8px;box-shadow:0 2px 10px #0003;text-align:center}.signup-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.name-row[_ngcontent-%COMP%]{display:flex;gap:16px}.buttons-row[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:center;margin-top:16px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:20px 0}@media (max-width: 576px){.name-row[_ngcontent-%COMP%], .buttons-row[_ngcontent-%COMP%]{flex-direction:column}}"]})};export{$ as SignupComponent};
