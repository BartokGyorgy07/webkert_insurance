import{a as H,b as J}from"./chunk-SNUHXQUX.js";import{b as A,d as T,f as j,g as B,h as q,i as U}from"./chunk-XOVWS2D2.js";import{b as F,d as m,f as O,g as I,i as k,j as f,k as D,l as V,q as N,r as R}from"./chunk-U5MZNTUN.js";import{q as y}from"./chunk-YNJY2X3T.js";import{o as E,p as P}from"./chunk-RF2VUACT.js";import{a as z,b as G}from"./chunk-IO52UDSH.js";import{$ as h,$a as _,Ca as C,Ha as g,La as s,Qa as c,Sb as S,Ta as e,Ua as i,Va as p,Xb as w,Yb as L,Za as v,aa as x,ab as d,kb as o,mb as b,ta as r,tb as M,xa as u}from"./chunk-7RETW5W6.js";var W=()=>["/signup"];function X(n,a){n&1&&(e(0,"div",1)(1,"h2"),o(2,"Login in progress"),i(),p(3,"mat-spinner",3),e(4,"p"),o(5,"Please wait..."),i()())}function Y(n,a){if(n&1&&(e(0,"div",9),o(1),i()),n&2){let t=d(2);r(),b(" ",t.loginError," ")}}function Z(n,a){if(n&1){let t=v();e(0,"form",4),_("ngSubmit",function(){h(t);let Q=d();return x(Q.login())}),e(1,"mat-form-field",5)(2,"mat-label"),o(3,"Email"),i(),p(4,"input",6),e(5,"mat-icon",7),o(6,"email"),i()(),e(7,"mat-form-field",5)(8,"mat-label"),o(9,"Password"),i(),p(10,"input",8),e(11,"mat-icon",7),o(12,"lock"),i()(),g(13,Y,2,1,"div",9),e(14,"button",10),o(15,"Login"),i(),e(16,"button",11),o(17,"Register"),i()()}if(n&2){let t=d();r(4),s("formControl",t.email),r(6),s("formControl",t.password),r(3),c(t.loginError?13:-1),r(3),s("routerLink",M(4,W))}}var K=class n{constructor(a,t){this.authService=a;this.router=t}email=new f("",[m.required,m.email]);password=new f("",[m.required,m.minLength(6)]);isLoading=!1;loginError="";showLoginForm=!0;authSubscription;login(){if(this.email.invalid){this.loginError="Please enter a valid email address";return}if(this.password.invalid){this.loginError="Please enter a valid password";return}let a=this.email.value||"",t=this.password.value||"";this.isLoading=!0,this.showLoginForm=!1,this.loginError="",this.authService.signIn(a,t).then(l=>{this.authService.updateLoginStatus(!0),this.router.navigateByUrl("/home")}).catch(l=>{switch(this.isLoading=!1,this.showLoginForm=!0,console.log(l.code),l.code){case"auth/user-not-found":this.loginError="User not found. Please check your email and try again.";break;case"auth/wrong-password":this.loginError="Incorrect password. Please try again.";break;case"auth/invalid-credential":this.loginError="Please check your email and password.";break;default:this.loginError="An error occurred. Please try again later.";break}})}ngOnDestroy(){this.authSubscription?.unsubscribe()}static \u0275fac=function(t){return new(t||n)(u(y),u(w))};static \u0275cmp=C({type:n,selectors:[["app-login"]],decls:5,vars:2,consts:[[1,"login-container"],[1,"loading-container"],[1,"login-form"],["diameter","50"],[1,"login-form",3,"ngSubmit"],["appearance","outline"],["matInput","","type","email",3,"formControl"],["matSuffix",""],["matInput","","type","password",3,"formControl"],[1,"error-message"],["mat-flat-button","","color","primary","type","submit"],["mat-flat-button","",3,"routerLink"]],template:function(t,l){t&1&&(e(0,"div",0)(1,"h1"),o(2,"Login"),i(),g(3,X,6,0,"div",1)(4,Z,18,5,"form",2),i()),t&2&&(r(3),c(l.isLoading?3:-1),r(),c(l.showLoginForm?4:-1))},dependencies:[S,N,D,F,O,I,k,R,V,B,j,A,T,U,q,P,E,G,z,J,H,L],styles:[".login-container[_ngcontent-%COMP%]{max-width:400px;margin:40px auto;padding:20px;border-radius:8px;box-shadow:0 2px 10px #0003;text-align:center}.login-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:20px;color:#3f51b5}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.error-message[_ngcontent-%COMP%]{color:#f44336;margin-bottom:16px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:20px 0}.loading-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:#3f51b5}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:20px;font-size:16px}"]})};export{K as LoginComponent};
